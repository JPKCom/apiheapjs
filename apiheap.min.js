/*TITLE: Apiheap.js : JavaScript Library AUTHOR: Tash-had Saqif | tash-had.com PROJECT: tash-had.github.io/apiheapjs*/function apiheap(a,b){if(SOURCE_ID=a.toLowerCase(),"reddit"===SOURCE_ID)this.reddit=function(a,b,c){this.SOURCE_NAME=a,this.LISTING=b,this.OPT_PARAMS=c;var d="https://www.reddit.com/";this.FINAL_URL=isUndefined(this.SOURCE_NAME)?isUndefined(this.LISTING)?d+".json":isUndefined(this.OPT_PARAMS)?d+this.LISTING+"/.json":d+this.LISTING+"/.json?"+this.OPT_PARAMS:isUndefined(this.LISTING)?d+"r/"+this.SOURCE_NAME+"/.json":isUndefined(this.OPT_PARAMS)?d+"r/"+this.SOURCE_NAME+"/"+this.LISTING+"/.json":d+"r/"+this.SOURCE_NAME+"/"+this.LISTING+"/.json?"+this.OPT_PARAMS;try{this.RESPONSE=$.ajax({url:this.FINAL_URL,dataType:"json",type:"GET",cache:!1})}catch(e){errorHandle("error| LOG:"+e+" ...reddit request error")}};else if("tumblr"===SOURCE_ID)this.SOURCE_KEY=b,this.tumblr=function(a,b,c){this.SOURCE_NAME=a;var d="http://api.tumblr.com/v2/blog/"+this.SOURCE_NAME;isUndefined(b)?isUndefined(c)?this.FINAL_URL=d+"/posts/?api_key="+this.SOURCE_KEY:(this.OPT_PARAMS=c,this.FINAL_URL=d+"/posts/?api_key="+this.SOURCE_KEY+"&"+this.OPT_PARAMS):(this.REQ_ITEM=b,isUndefined(c)?this.FINAL_URL=d+"/posts/"+this.REQ_ITEM+"?api_key="+this.SOURCE_KEY:(this.OPT_PARAMS=c,this.FINAL_URL=d+"/posts/"+this.REQ_ITEM+"?api_key="+this.SOURCE_KEY+"&"+this.OPT_PARAMS));try{this.RESPONSE=$.ajax({url:this.FINAL_URL,type:"GET",dataType:"jsonp",cache:!1})}catch(e){errorHandle("error| LOG:"+e+" ...tumblr request error")}};else if("bitly"===SOURCE_ID){this.SHORT_URL,this.SOURCE_KEY=b;var c="https://api-ssl.bitly.com/v3/shorten?access_token="+this.SOURCE_KEY+"&";this.bitly=function(a){this.SOURCE_NAME=a,this.FINAL_URL=c+"longUrl="+encodeURIComponent(this.SOURCE_NAME)+"&format=json";try{this.RESPONSE=$.ajax({url:this.FINAL_URL,dataType:"json",type:"GET",cache:!1})}catch(b){errorHandle("error| LOG:"+b+" ...bitly request error")}}}else"imgur"===SOURCE_ID?(this.SOURCE_KEY=b,this.imgur=function(a,b,c){this.TAG=a,this.OPT_PARAMS=b,c?isUndefined(this.TAG)?errorHandle("error| LOG: imgur request error: you need to set a topic name"):this.FINAL_URL=isUndefined(this.OPT_PARAMS)?"https://api.imgur.com/3/topics/"+this.TAG:"https://api.imgur.com/3/topics/"+this.TAG+"/"+this.OPT_PARAMS:this.FINAL_URL=isUndefined(this.TAG)?isUndefined(this.OPT_PARAMS)?"https://api.imgur.com/3/gallery/":"https://api.imgur.com/3/gallery/"+this.OPT_PARAMS:isUndefined(this.OPT_PARAMS)?"https://api.imgur.com/3/gallery/t/"+this.TAG:"https://api.imgur.com/3/gallery/t/"+this.TAG+"/"+this.OPT_PARAMS;try{this.RESPONSE=$.ajax({url:this.FINAL_URL,dataType:"json",type:"GET",cache:!1,headers:{Authorization:"Client-ID "+this.SOURCE_KEY}})}catch(d){errorHandle("error| LOG:"+d+" ...imgur request error")}}):"youtube"===SOURCE_ID?(this.SOURCE_KEY=b,this.youtube=function(a,b,c,d){if(this.TYPE=a,this.PART=b,this.OPT_PARAMS=c,this.PAGE_TOKEN=d,isUndefined(this.TYPE)||isUndefined(this.PART))errorHandle("error| LOG: youtube request error: type and part parameters are required");else{var e="https://www.googleapis.com/youtube/v3/"+this.TYPE+"?part="+this.PART+"&key="+this.SOURCE_KEY;this.FINAL_URL=isUndefined(this.OPT_PARAMS)?isUndefined(this.PAGE_TOKEN)?e:e+"&pageToken="+this.PAGE_TOKEN:isUndefined(this.PAGE_TOKEN)?e+"&"+this.OPT_PARAMS:e+"&"+this.OPT_PARAMS+"&pageToken="+this.PAGE_TOKEN}try{this.RESPONSE=$.ajax({url:this.FINAL_URL,dataType:"json",type:"GET",cache:!1})}catch(f){errorHandle("error| LOG:"+f+" ...youtube request error")}}):"openweathermap"===SOURCE_ID?(this.SOURCE_KEY=b,this.weather=function(a,b){this.CITY=a,this.CUSTOM=b,isUndefined(this.CUSTOM)?isUndefined(this.CITY)?errorHandle("openweathermap error: missing perams"):this.FINAL_URL="http://api.openweathermap.org/data/2.5/weather?q="+this.CITY+"&appid="+this.SOURCE_KEY:this.FINAL_URL="http://api.openweathermap.org/data/2.5/weather?"+this.CUSTOM+"&appid="+this.SOURCE_KEY;try{this.RESPONSE=$.ajax({url:this.FINAL_URL,dataType:"json",type:"GET",cache:!1})}catch(c){errorHandle("openweathermap request error. LOG| "+c)}}):errorHandle("error| LOG: invalid source")}function bitlyParse(a){var b=JSON.parse(a.responseText);return b.data.url}function tumblrParse(a,b){var c=a.responseJSON.response,d=b;if(isUndefined(d))return c.posts;if("blog_info"===d)return c.blog;if("total_posts"===d)return c.total_posts;var e=[];try{$(c.posts).each(function(a,b){"photos_url"===d?$(b).each(function(a,b){e.push(b.photos[0].original_size.url)}):e.push(b[d])})}catch(f){}finally{return e}}function imgurParse(a,b,c){var d=[],e=a;if(isUndefined(b))return c?e.responseJSON.data.items:e.responseJSON.data;try{c?$(e.responseJSON.data.items).each(function(a,c){$(c).each(function(a,c){d.push(c[b])})}):$(e.responseJSON.data).each(function(a,c){$(c).each(function(a,c){d.push(c[b])})})}catch(f){}finally{return d}}function redditParse(a,b){var c=[],d=a,e=b;try{isUndefined(e)?c=d.responseJSON.data.children:$(d.responseJSON.data.children).each(function(a,b){c.push(b.data[e])})}catch(f){errorHandle("error| LOG:"+f+" ...reddiit parse error")}finally{return c}}function youtubeParse(a,b){if(isUndefined(b))errorHandle("youtube parse error: you must request an item as a parameter");else{var c=a,d=b,e=[];try{$(c).each(function(a,b){$(b.responseJSON.items).each(function(a,b){switch(d){case"type":e.push(b.id.kind);break;case"vid_links":e.push("https://www.youtube.com/watch?v="+b.id.videoId);break;case"vid_ids":e.push(b.id.videoId);break;case"vid_dates":e.push(b.snippet.publishedAt);break;case"vid_titles":e.push(b.snippet.title);break;case"vid_thumbnails":e.push(b.snippet.thumbnails.high.url);break;case"chan_links":e.push("https://www.youtube.com/channel/"+b.snippet.channelId);break;case"chan_ids":e.push(b.snippet.channelId);break;case"chan_names":e.push(b.snippet.channelTitle);break;case"vid_descriptions":e.push(b.snippet.description)}})})}catch(f){errorHandle("youtube parse error")}finally{return e}}}function weatherParse(a,b){var c=a,d=b;return isUndefined(d)?c.responseJSON:"weather"===d?c.responseJSON[d][0].description:c.responseJSON[d]}function errorHandle(a){alert("APIHEAP ERROR: "+a)}function html_strip(a){return jQuery("<p>"+a+"</p>").text()}function preventDuplicate(a,b){return-1===b.indexOf(a)&&"undefined"!==a&&void 0!==a&&"default"!==a&&void 0!==typeof a&&"null"!==a&&null!==a?!0:!1}function pageToken(a){return a.responseJSON.nextPageToken}isUndefined=function(a){return"undefined"===typeof a||null===a||"null"===a||void 0===a?!0:!1};